= Adding a Flex Gateway API Instance
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

include::partial$task-create-instance.adoc[tags=intro1;intro-flex;intro2]

== Add a New API

. Navigate to *Anypoint Platform* > *API Manager*.
. In *API Administration*, click *Add API* and select *Add new API*.
. Select *Flex Gateway* if not already selected.
. Select a connected Flex Gateway you have installed and registered from the list under *Select a gateway*.
+
[NOTE]
--
If you do not see a Flex Gateway listed, or you see a Flex Gateway but its status is DISCONNECTED,
See xref:gateway::flex-install.adoc[Install Flex Gateway] and xref:gateway::flex-conn-reg-run.adoc[Register and Run in Connected Mode] for more information.
--
. Click *Next*.
. Configure the downstream.
+
.Flex Gateway 1.4
[%collapsible]
====
include::partial$endpoint-reference-table.adoc[tags=flex-1-4-downstream]
====
+
.Flex Gateway 1.3
[%collapsible]
====
include::partial$endpoint-reference-table.adoc[tags=flex-1-3-downstream]
====
. Click *Next*.
. Configure the upstream.
+
.Flex Gateway 1.4
[%collapsible]
====
include::partial$endpoint-reference-table.adoc[tags=flex-1-4-upstream]
====
+
.Flex Gateway 1.3
[%collapsible]
====
include::partial$endpoint-reference-table.adoc[tags=flex-1-3-upstream]
====
. Click *Next*.
+
include::partial$task-configure-proxy.adoc[tags=last-steps]

== Promote API from Environment

. Navigate to *Anypoint Platform* > *API Manager*. 
. In *API Administration*, click **Add API** and select **Promote API from environment**.
. Select the **Source Environment**.
. Select the **API** by entering the name of the API into the search field.
. Select the **API Version**.
. Select the **API instance label**.
. Optionally, uncheck any of the **Include in Promotion** options you want to exclude.
. Click **Promote**.
. Review and update the Runtime & Endpoint Configuration details as needed and click **Save**.

== Import API from Zip File

. Navigate to *Anypoint Platform* > *API Manager*.
. From *API Administration*, click **Add API** and select **Import API from zip file**.
. Click **Choose file** and select your API instance configuration zip file.
. Click **Next**.
. Review and update the API Configuration details as needed and click **Save**.

== Notes

* Although OpenAPI Specification (OAS) 3.0 is supported, the callback feature is not. To work around this issue, either handle the callback outside of the Mule runtime engine domain or use an OAS 3.0 specification that does not use callbacks.
